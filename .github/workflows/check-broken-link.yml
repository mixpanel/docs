name: Check Markdown links

on: 
  # triggered on PR
  # pull_request: {}
  
  # manual trigger
  workflow_dispatch: {}

jobs:
  markdown-link-check:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - uses: gaurav-nelson/github-action-markdown-link-check@v1
      with:
        # run for .md
        file-extension: '.md'
        # only returns errors
        use-quiet-mode: 'yes'
        use-verbose-mode: 'yes'
        #location for config
        config-file: '.github/workflows/check_broken_link_config.json'
        # folders to check parse
        folder-path: 'pages/docs, pages/changelogs, pages/guides'
        # depth from folder path
        max-depth: -1
        # only check files changed in the PR
        # check-modified-files-only: 'yes'
        # branch to compare for diff
        #base-branch: 'main'
    # run for .mdx
    - uses: gaurav-nelson/github-action-markdown-link-check@v1
      with:
        file-extension: '.mdx'
        use-quiet-mode: 'yes'
        use-verbose-mode: 'yes'
        config-file: '.github/workflows/check_broken_link_config.json'
        folder-path: 'pages/docs, pages/changelogs, pages/guides'
        max-depth: -1
        # base-branch: 'main'
        # check-modified-files-only: 'yes'
